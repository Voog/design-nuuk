!function(l){function m(e,t){.5<=t?l(e).addClass("light-background").removeClass("dark-background"):l(e).addClass("dark-background").removeClass("light-background")}function i(e,t){return function(i,a){if(i&&a){"string"==typeof i&&(i=i.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(i,function(e,t){i[e]=+t})),"string"==typeof a&&(a=a.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(a,function(e,t){a[e]=+t})),"object"==typeof i&&i.hasOwnProperty("length")&&3==i.length&&i.push(1),"object"==typeof a&&a.hasOwnProperty("length")&&3==a.length&&a.push(1);var e=[0,0,0,0];return e[3]=1-(1-a[3])*(1-i[3]),0===e[3]&&(e[3]=1e-6),e[0]=Math.min(a[0]*a[3]/e[3]+i[0]*i[3]*(1-a[3])/e[3],255),e[1]=Math.min(a[1]*a[3]/e[3]+i[1]*i[3]*(1-a[3])/e[3],255),e[2]=Math.min(a[2]*a[3]/e[3]+i[2]*i[3]*(1-a[3])/e[3],255),l.map(e,function(e){return Math.floor(e)})}}(e||[255,255,255,1],t||[255,255,255,1])}var g=function(e,t){t=i(e,t);return Math.round((.2126*+t[0]+.7152*+t[1]+.0722*+t[2])/2.55)/100};window.site=l.extend(window.site||{},{bgPickerPreview:function(t,e,i){var a=t.bg&&t.bg.image||"",o=e.imageSizes?function(e,t){for(var i,a=0,o=e.length;a<o;a++){if(e[a].width<t)return i||e[a];i=e[a]}return e[e.length-1]}(e.imageSizes,l(window).width()):null,s=(e.image&&""!==e.image&&o.url,e.imageSizes&&""!==e.imageSizes?e.imageSizes:null),r=e.color&&""!==e.color?e.color:"rgba(0,0,0,0)",n=(e.colorData&&""!==e.colorData&&e.colorData.lightness,l("<img>")),c=l("<canvas>"),d=e.image&&""!==e.image?e.image:null;d?!function(e,t){for(var i=e.length;i--;)if(-1<t.indexOf(e[i].url.trim()))return!0;return!1}(s,a)?(n.attr("src",d.replace(/.*\/(photos|voogstock)/g,"/photos")),n.on("load",function(){ColorExtract.extract(n[0],c[0],function(e){i.imageColor=e.bgColor||"rgba(255,255,255,1)",i.combinedLightness=g(i.imageColor,r),m(t.picker_area_elem,i.combinedLightness)})})):(i.imageColor=i.imageColor||"rgba(255,255,255,1)",i.combinedLightness=g(i.imageColor,r),m(t.picker_area_elem,i.combinedLightness)):(i.imageColor="rgba(255,255,255,1)",i.combinedLightness=g(i.imageColor,r),m(t.picker_area_elem,i.combinedLightness)),(t.image_elem||t.color_elem)&&(o=l(t.image_elem),s=l(t.color_elem),a=o.closest(t.picker_area_elem),d=e.color&&""!==e.color?e.color:"transparent",e.image?(o.attr("src",e.image),o.attr("srcset",e.image),o.css("display","initial"),t.wrapper_class&&(a.hasClass(t.wrapper_class)||a.addClass(t.wrapper_class))):(o.removeAttr("src"),o.removeAttr("srcset"),o.css("display","none"),t.wrapper_class&&a.hasClass(t.wrapper_class)&&a.removeClass(t.wrapper_class)),d&&s.css("background-color",d))},bgPickerCommit:function(e,t,i,a){var o,s=l.extend(!0,{},t);s.image=t.image||"",s.imageSizes=null==(o=t.imageSizes)||"string"==typeof o&&o.match(/^[\\'"]+$/)?"":o,s.color=t.color||"",s.combinedLightness=i.combinedLightness,"siteData"==a?siteData.set(e,s):"articleData"==a?Edicy.articles.currentArticle.setData(e,s):pageData.set(e,s)},bindContentItemImgDropAreas:function(o,s,r){l(".js-content-item-img-drop-area").each(function(e,t){var i=l(t),a=i.closest(".js-content-item-box"),t=a.find(".image_settings-remove");itemId=a.data("item-id"),itemType=a.data("item-type"),itemData=new Edicy.CustomData({type:itemType,id:itemId});new Edicy.ImgDropArea(i,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+o+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var t=a.find(".js-toggle-crop-state");i.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(e.original_id,a.find(".image_settings").show(),a.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),t.removeClass("is-hidden").addClass("is-visible")):(a.find(".image_settings").hide(),a.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),t.addClass("is-hidden").removeClass("is-visible"),a.find(".edy-img-drop-area-placeholder").css("opacity",0)),itemData.set({[r]:"not-cropped",[s]:e}),a.removeClass("not-loaded with-error").addClass("is-loaded"),a.find(".edy-img-drop-area-placeholder").css("opacity",1),i.css("opacity",1)}});t.on("click",function(){var t=l(this);itemData.remove(s,{success:function(e){itemData.remove(r,{success:function(e){t.closest(".js-content-item-box").find(".top-inner").append('<div class="edy-img-drop-area-placeholder">'+o+"</div>"),t.closest(".js-content-item-box").find(".top-inner").attr("style",""),t.closest(".js-content-item-box").removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),t.closest(".js-content-item-box").find(".edy-img-drop-area").removeClass("active"),t.closest(".image_settings").hide(),t.closest(".js-content-item-box").find(".image_settings-remove--input").val(""),t.closest(".js-content-item-box").find(".image_settings-remove--input").trigger("change"),t.closest(".js-content-item-box").find(".form_field-cms").removeClass("with-input")}})}})})})},bindContentItemImageCropToggle:function(a){l(".js-toggle-crop-state").on("click",function(){var e=l(this).closest(".js-content-item-box"),t=e.find(".js-content-item-img-drop-area"),i=e.data("item-id"),e=e.data("item-type"),i=new Edicy.CustomData({type:e,id:i}),t=t.hasClass("is-cropped")?(t.removeClass("is-cropped").addClass("not-cropped"),"not-cropped"):(t.removeClass("not-cropped").addClass("is-cropped"),"is-cropped");i.set(a,t)})}}),window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])}(jQuery);