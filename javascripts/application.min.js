var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var p,s,h,Q,l,f;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),Q=function(t,o,e){return(t<<2*b.sigbits)+(o<<b.sigbits)+e},p=function(){function t(t,o,e,r,n,i,s){this.r1=t,this.r2=o,this.g1=e,this.g2=r,this.b1=n,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,r,n,i,s,c,a,u,h,l;if(!this._count_set||t){for(n=0,i=s=this.r1,u=this.r2;s<=u;i=s+=1)for(e=c=this.g1,h=this.g2;c<=h;e=c+=1)for(o=a=this.b1,l=this.b2;a<=l;o=a+=1)r=Q(i,e,o),n+=this.histo[r]||0;this._count_set=!0,this._count=n}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,r,n,i,s,c,a,u,h,l,f,g,p,m,d;if(!this._average||t){for(c=1<<8-b.sigbits,e=n=u=h=0,a=l=this.r1,p=this.r2;l<=p;a=l+=1)for(r=f=this.g1,m=this.g2;f<=m;r=f+=1)for(o=g=this.b1,d=this.b2;g<=d;o=g+=1)s=Q(a,r,o),h+=i=this.histo[s]||0,u+=i*(a+.5)*c,n+=i*(r+.5)*c,e+=i*(o+.5)*c;this._average=h?[~~(u/h),~~(n/h),~~(e/h)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,r;return r=t[0]>>b.rshift,e=t[1]>>b.rshift,o=t[2]>>b.rshift,this.r1<=r&&r<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,r;return e=t.count()*t.volume(),(r=o.count()*o.volume())<e?1:e<r?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,r;for(o=e=0,r=this.cboxes.size();e<r;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,r,n,i,s,c;for(i=function(t){return t*t},r=1e9,e=s=0,c=this.cboxes.size();s<c;e=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(e).color[0])+i(t[1]-this.cboxes.peek(e).color[1])+i(t[2]-this.cboxes.peek(e).color[2])))<r&&(r=o,n=this.cboxes.peek(e).color);return n},t}(),l=function(t){var o,e,r,n,i,s,c,a;for(r=new Array(1<<3*b.sigbits),c=0,a=t.length;c<a;c++)s=(i=t[c])[0]>>b.rshift,e=i[1]>>b.rshift,o=i[2]>>b.rshift,r[n=Q(s,e,o)]=(r[n]||0)+1;return r},h=function(t,o){var e,r,n,i,s,c,a,u,h,l,f,g;for(n=c=l=1e6,f=r=s=h=0,g=t.length;f<g;f++)(u=(a=t[f])[0]>>b.rshift)<l?l=u:h<u&&(h=u),(i=a[1]>>b.rshift)<c?c=i:s<i&&(s=i),(e=a[2]>>b.rshift)<n?n=e:r<e&&(r=e);return new p(l,h,c,s,n,r,o)},f=function(t,f){var o,e,r,n,i,g,s,p,c,a,u,m,h,l,d,b,v,y,C,w,x,k,M,P,_,z,j,S,L,D;if(f.count()){if(1===f.count())return[f.copy()];if(a=f.r2-f.r1+1,i=f.g2-f.g1+1,e=f.b2-f.b1+1,s=Math.max(a,i,e),m=0,p=[],g=[],s===a)for(c=h=f.r1,k=f.r2;h<=k;c=h+=1){for(u=0,n=l=f.g1,j=f.g2;l<=j;n=l+=1)for(o=d=f.b1,S=f.b2;d<=S;o=d+=1)u+=t[Q(c,n,o)]||0;m+=u,p[c]=m}else if(s===i)for(n=b=f.g1,L=f.g2;b<=L;n=b+=1){for(u=0,c=v=f.r1,D=f.r2;v<=D;c=v+=1)for(o=y=f.b1,M=f.b2;y<=M;o=y+=1)u+=t[Q(c,n,o)]||0;m+=u,p[n]=m}else for(o=C=f.b1,P=f.b2;C<=P;o=C+=1){for(u=0,c=w=f.r1,_=f.r2;w<=_;c=w+=1)for(n=x=f.g1,z=f.g2;x<=z;n=x+=1)u+=t[Q(c,n,o)]||0;m+=u,p[o]=m}return p.forEach(function(t,o){return g[o]=m-t}),r=function(t){var o,e,r,n,i,s,c,a,u,h,l;for(s=t+"2",c=h=f[i=t+"1"],l=f[s];h<=l;c=h+=1)if(p[c]>m/2){for(o=f.copy(),e=f.copy(),n=(a=c-f[i])<=(u=f[s]-c)?Math.min(f[s]-1,~~(c+u/2)):Math.max(f[i],~~(c-1-a/2));!p[n];)n++;for(r=g[n];!r&&p[n-1];)r=g[--n];return o[s]=n,e[i]=o[s]+1,[o,e]}},s===a?r("r"):s===i?r("g"):s===e?r("b"):void 0}},b.prototype.quantize=function(t,o){var c,e,a,r,n,i,u=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(a=l(t),c=h(t,a),(n=new PriorityQueue(function(t,o){var e,r;return e=t.count(),(r=o.count())<e?1:e<r?-1:0})).push(c),(r=function(t,o){var e,r,n,i,s;for(i=1,s=0;s<u.maxIterations;)if((c=t.pop()).count()){if(e=(n=f(a,c))[0],r=n[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),r&&(t.push(r),i++),o<=i)return;if(s++>u.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(c),s++})(n,this.fractByPopulations*o),i=new PriorityQueue(function(t,o){var e,r;return e=t.count()*t.volume(),(r=o.count()*o.volume())<e?1:e<r?-1:0});n.size();)i.push(n.pop());for(r(i,o-i.size()),e=new s;i.size();)e.push(i.pop());return e},b}.call(this),function(){window.ColorExtract=function(){function d(){}return d.getColorMap=function(t,o,e,r,n,i){var s,c,a,u,h,l,f,g,p,m;for(null==i&&(i=8),a=t.getContext("2d").getImageData(o,e,r,n).data,u=[],l=f=e,p=e+n;f<p;l=f+=1)for(c=l*r*4,h=g=o,m=o+r;g<m;h=g+=1)s=c+4*h,u.push([a[s],a[s+1],a[s+2]]);return(new MMCQ).quantize(u,i)},d.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},d.extract=function(t,o,e){var r,n,i,s,c,a,u,h,l,f,g,p,m;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(n=d.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),r=n[0].rgb,(u=d.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),f=h=0,p=u.length;f<p;f++)i=u[f],h<(s=d.colorDist(r,i.rgb))&&(h=s,c=i.rgb);for(g=h=0,m=u.length;g<m;g++)i=u[g],h<(s=d.colorDist(r,i.rgb))&&i.rgb!==c&&(h=s,a=i.rgb);return e({bgColor:(l=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(r),fgColor:l(c),fgColor2:l(a)})},d}()}.call(this),function(l){var f=function(t,o){.5<=o?l(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):l(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},r=function(t,o){return function(e,r){if(e&&r){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(e,function(t,o){e[t]=+o})),"string"==typeof r&&(r=r.replace(/rgba?\(/,"").replace(/\)/,"").split(","),l.each(r,function(t,o){r[t]=+o})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof r&&r.hasOwnProperty("length")&&3==r.length&&r.push(1);var t=[0,0,0,0];return t[3]=1-(1-r[3])*(1-e[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(r[0]*r[3]/t[3]+e[0]*e[3]*(1-r[3])/t[3],255),t[1]=Math.min(r[1]*r[3]/t[3]+e[1]*e[3]*(1-r[3])/t[3],255),t[2]=Math.min(r[2]*r[3]/t[3]+e[2]*e[3]*(1-r[3])/t[3],255),l.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])},g=function(t,o){var e=r(t,o);return Math.round((.2126*+e[0]+.7152*+e[1]+.0722*+e[2])/2.55)/100};window.site=l.extend(window.site||{},{bgPickerPreview:function(o,t,e){var r=l(o).css("background-image"),n=t.imageSizes?function(t,o){for(var e,r=0,n=t.length;r<n;r++){if(t[r].width<o)return e||t[r];e=t[r]}return t[t.length-1]}(t.imageSizes,l(window).width()):null,i=t.image&&""!==t.image?"url("+n.url+")":"none",s=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,c=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",a=(t.colorData&&""!==t.colorData&&t.colorData.lightness,l("<img>")),u=l("<canvas>"),h=t.image&&""!==t.image?t.image:null;h?function(t,o){for(var e=t.length;e--;)if(-1<o.indexOf(t[e].url.trim()))return!0;return!1}(s,r)?(e.imageColor=e.imageColor?e.imageColor:defaultImageColor,e.combinedLightness=g(e.imageColor,c),f(o,e.combinedLightness)):(a.attr("src",h.replace(/.*\/(photos|voogstock)/g,"/photos")),a.on("load",function(){ColorExtract.extract(a[0],u[0],function(t){e.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",e.combinedLightness=g(e.imageColor,c),f(o,e.combinedLightness)})})):(e.imageColor="rgba(255,255,255,1)",e.combinedLightness=g(e.imageColor,c),f(o,e.combinedLightness)),l(o).find(".js-background-image").first().css({"background-image":i}),l(o).find(".js-background-color").first().css({"background-color":c})},bgPickerCommit:function(t,o,e,r){var n,i=l.extend(!0,{},o);i.image=o.image||"",i.imageSizes=null==(n=o.imageSizes)||"string"==typeof n&&n.match(/^[\\'"]+$/)?"":n,i.color=o.color||"",i.combinedLightness=e.combinedLightness,"articlePage"===r?Edicy.articles.currentArticle.setData(t,i):pageData.set(t,i)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?l(".header-wrapper").addClass("light").removeClass("dark"):l(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=l(".js-content-optional"),l.each(l(optionalContent),function(){optionalContentLength=l(this).text().trim().length,0<!optionalContentLength&&l(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindSiteSearch:function(t,o,e){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:l(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:e})}}),l("body").on("mousedown",function(t){l(t.target).closest(".js-prevent-sideclick").length||(l(".js-semimodal").removeClass("semimodal-visible"),l(".js-popover").removeClass("expanded"),l(".js-search-close-btn").trigger("click"))}),l(".menu-lang").find(".menu").change(function(){window.location=l(this).find(":selected").val()}),l(".js-menu-btn, .js-close-menu").click(function(){l(".js-semimodal").toggleClass("semimodal-visible")}),l(document).ready(function(){l(".comment-form").hasClass("form_with_errors")?l("html, body").scrollTop(l(".comment-form").offset().top):0<l("form").find(".form_error, .form_notice").length&&l("html, body").scrollTop(l(".form_error, .form_notice").closest("form").offset().top)}),l("html").hasClass("editmode")?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):l(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);