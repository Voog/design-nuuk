var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var t,o,e,r,n,i;function s(){this.maxIterations=1e3,this.fractByPopulations=.75}return s.sigbits=5,s.rshift=8-s.sigbits,r=function(t,o,e){return(t<<2*s.sigbits)+(o<<s.sigbits)+e},t=function(){function t(t,o,e,r,n,i,s){this.r1=t,this.r2=o,this.g1=e,this.g2=r,this.b1=n,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,n,i,s,c,a,u,h,f,g;if(!this._count_set||t){for(i=0,s=c=this.r1,h=this.r2;c<=h;s=c+=1)for(e=a=this.g1,f=this.g2;a<=f;e=a+=1)for(o=u=this.b1,g=this.b2;u<=g;o=u+=1)n=r(s,e,o),i+=this.histo[n]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,n,i,c,a,u,h,f,g,l,p,m,d,b,v;if(!this._average||t){for(u=1<<8-s.sigbits,g=0,f=0,i=0,e=0,h=l=this.r1,d=this.r2;l<=d;h=l+=1)for(n=p=this.g1,b=this.g2;p<=b;n=p+=1)for(o=m=this.b1,v=this.b2;m<=v;o=m+=1)a=r(h,n,o),g+=c=this.histo[a]||0,f+=c*(h+.5)*u,i+=c*(n+.5)*u,e+=c*(o+.5)*u;this._average=g?[~~(f/g),~~(i/g),~~(e/g)]:[~~(u*(this.r1+this.r2+1)/2),~~(u*(this.g1+this.g2+1)/2),~~(u*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,r;return r=t[0]>>s.rshift,e=t[1]>>s.rshift,o=t[2]>>s.rshift,this.r1<=r&&r<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),o=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,r;return(e=t.count()*t.volume())>(r=o.count()*o.volume())?1:e<r?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,r;for(o=e=0,r=this.cboxes.size();e<r;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,r,n,i,s,c;for(i=function(t){return t*t},r=1e9,e=s=0,c=this.cboxes.size();s<c;e=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(e).color[0])+i(t[1]-this.cboxes.peek(e).color[1])+i(t[2]-this.cboxes.peek(e).color[2])))<r&&(r=o,n=this.cboxes.peek(e).color);return n},t}(),n=function(t){var o,e,n,i,c,a,u,h,f;for(i=1<<3*s.sigbits,n=new Array(i),h=0,f=t.length;h<f;h++)u=(a=t[h])[0]>>s.rshift,e=a[1]>>s.rshift,o=a[2]>>s.rshift,n[c=r(u,e,o)]=(n[c]||0)+1;return n},e=function(o,e){var r,n,i,c,a,u,h,f,g,l,p,m;for(l=1e6,g=0,u=1e6,a=0,i=1e6,n=0,p=0,m=o.length;p<m;p++)f=(h=o[p])[0]>>s.rshift,c=h[1]>>s.rshift,r=h[2]>>s.rshift,f<l?l=f:f>g&&(g=f),c<u?u=c:c>a&&(a=c),r<i?i=r:r>n&&(n=r);return new t(l,g,u,a,i,n,e)},i=function(t,o){var e,n,i,s,c,a,u,h,f,g,l,p,m,d,b,v,y,C,x,w,k,M,P,_,z,j,S,L,D,Q;if(o.count()){if(1===o.count())return[o.copy()];if(g=o.r2-o.r1+1,c=o.g2-o.g1+1,n=o.b2-o.b1+1,u=Math.max(g,c,n),p=0,h=[],a=[],u===g)for(f=m=o.r1,M=o.r2;m<=M;f=m+=1){for(l=0,s=d=o.g1,S=o.g2;d<=S;s=d+=1)for(e=b=o.b1,L=o.b2;b<=L;e=b+=1)l+=t[r(f,s,e)]||0;p+=l,h[f]=p}else if(u===c)for(s=v=o.g1,D=o.g2;v<=D;s=v+=1){for(l=0,f=y=o.r1,Q=o.r2;y<=Q;f=y+=1)for(e=C=o.b1,P=o.b2;C<=P;e=C+=1)l+=t[r(f,s,e)]||0;p+=l,h[s]=p}else for(e=x=o.b1,_=o.b2;x<=_;e=x+=1){for(l=0,f=w=o.r1,z=o.r2;w<=z;f=w+=1)for(s=k=o.g1,j=o.g2;k<=j;s=k+=1)l+=t[r(f,s,e)]||0;p+=l,h[e]=p}return h.forEach(function(t,o){return a[o]=p-t}),i=function(t){var e,r,n,i,s,c,u,f,g,l,m;for(c=t+"2",u=l=o[s=t+"1"],m=o[c];l<=m;u=l+=1)if(h[u]>p/2){for(e=o.copy(),r=o.copy(),i=(f=u-o[s])<=(g=o[c]-u)?Math.min(o[c]-1,~~(u+g/2)):Math.max(o[s],~~(u-1-f/2));!h[i];)i++;for(n=a[i];!n&&h[i-1];)n=a[--i];return e[c]=i,r[s]=e[c]+1,[e,r]}},u===g?i("r"):u===c?i("g"):u===n?i("b"):void 0}},s.prototype.quantize=function(t,r){var s,c,a,u,h,f,g=this;if(!t.length||r<2||r>256)return console.log("invalid arguments"),!1;for(a=n(t),s=e(t,a),(h=new PriorityQueue(function(t,o){var e,r;return(e=t.count())>(r=o.count())?1:e<r?-1:0})).push(s),(u=function(t,o){var e,r,n,c,u;for(c=1,u=0;u<g.maxIterations;)if((s=t.pop()).count()){if(e=(n=i(a,s))[0],r=n[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),r&&(t.push(r),c++),c>=o)return;if(u++>g.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),u++})(h,this.fractByPopulations*r),f=new PriorityQueue(function(t,o){var e,r;return(e=t.count()*t.volume())>(r=o.count()*o.volume())?1:e<r?-1:0});h.size();)f.push(h.pop());for(u(f,r-f.size()),c=new o;f.size();)c.push(f.pop());return c},s}.call(this),function(){window.ColorExtract=function(){function t(){}return t.getColorMap=function(t,o,e,r,n,i){var s,c,a,u,h,f,g,l,p,m;for(null==i&&(i=8),a=t.getContext("2d").getImageData(o,e,r,n).data,u=[],f=g=e,p=e+n;g<p;f=g+=1)for(c=f*r*4,h=l=o,m=o+r;l<m;h=l+=1)s=c+4*h,u.push([a[s],a[s+1],a[s+2]]);return(new MMCQ).quantize(u,i)},t.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},t.extract=function(o,e,r){var n,i,s,c,a,u,h,f,g,l,p,m,d;for(e.width=25,e.height=25,e.getContext("2d").drawImage(o,0,0,e.width,e.height),(i=t.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),n=i[0].rgb,(h=t.getColorMap(e,0,0,o.width,o.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),f=0,l=0,m=h.length;l<m;l++)s=h[l],(c=t.colorDist(n,s.rgb))>f&&(f=c,a=s.rgb);for(f=0,p=0,d=h.length;p<d;p++)s=h[p],(c=t.colorDist(n,s.rgb))>f&&s.rgb!==a&&(f=c,u=s.rgb);return r({bgColor:(g=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:g(a),fgColor2:g(u)})},t}()}.call(this),function(t){var o=function(o,e){e>=.5?t(o).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):t(o).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},e=function(o,e){return function(o,e){if(o&&e){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(o,function(t,e){o[t]=+e})),"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(e,function(t,o){e[t]=+o})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1);var r=[0,0,0,0];return r[3]=1-(1-e[3])*(1-o[3]),0===r[3]&&(r[3]=1e-6),r[0]=Math.min(e[0]*e[3]/r[3]+o[0]*o[3]*(1-e[3])/r[3],255),r[1]=Math.min(e[1]*e[3]/r[3]+o[1]*o[3]*(1-e[3])/r[3],255),r[2]=Math.min(e[2]*e[3]/r[3]+o[2]*o[3]*(1-e[3])/r[3],255),t.map(r,function(t){return Math.floor(t)})}}(o||[255,255,255,1],e||[255,255,255,1])},r=function(t,o){var r=e(t,o);return Math.round((.2126*+r[0]+.7152*+r[1]+.0722*+r[2])/2.55)/100};window.site=t.extend(window.site||{},{bgPickerPreview:function(e,n,i){var s=t(e).css("background-image"),c=n.imageSizes?function(t,o){for(var e,r=0,n=t.length;r<n;r++){if(t[r].width<o)return e||t[r];e=t[r]}return t[t.length-1]}(n.imageSizes,t(window).width()):null,a=n.image&&""!==n.image?"url("+c.url+")":"none",u=n.imageSizes&&""!==n.imageSizes?n.imageSizes:null,h=n.color&&""!==n.color?n.color:"rgba(0,0,0,0)",f=(n.colorData&&""!==n.colorData&&n.colorData.lightness,t("<img>")),g=t("<canvas>"),l=n.image&&""!==n.image?n.image:null;l?function(t,o){for(var e=t.length;e--;)if(o.indexOf(t[e].url.trim())>-1)return!0;return!1}(u,s)?(i.imageColor=i.imageColor?i.imageColor:defaultImageColor,i.combinedLightness=r(i.imageColor,h),o(e,i.combinedLightness)):(f.attr("src",l.replace(/.*\/(photos|voogstock)/g,"/photos")),f.on("load",function(){ColorExtract.extract(f[0],g[0],function(t){i.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",i.combinedLightness=r(i.imageColor,h),o(e,i.combinedLightness)})})):(i.imageColor="rgba(255,255,255,1)",i.combinedLightness=r(i.imageColor,h),o(e,i.combinedLightness)),t(e).find(".js-background-image").first().css({"background-image":a}),t(e).find(".js-background-color").first().css({"background-color":h})},bgPickerCommit:function(o,e,r,n){var i,s=t.extend(!0,{},e);s.image=e.image||"",s.imageSizes=null==(i=e.imageSizes)||"string"==typeof i&&i.match(/^[\\'"]+$/)?"":i,s.color=e.color||"",s.combinedLightness=r.combinedLightness,"articlePage"===n?Edicy.articles.currentArticle.setData(o,s):pageData.set(o,s)},bgPickerColorScheme:function(o){void 0!==o&&(o>.6?t(".header-wrapper").addClass("light").removeClass("dark"):t(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=t(".js-content-optional"),t.each(t(optionalContent),function(){optionalContentLength=t(this).text().trim().length,!optionalContentLength>0&&t(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindSiteSearch:function(o,e,r){o&&new VoogSearch(o,{per_page:10,lang:e,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:r})}}),t(".container").on("mousedown",function(o){t(o.target).closest(".js-prevent-sideclick").length||(t(".js-popover").removeClass("expanded"),t(".js-search-close-btn").trigger("click"))}),t(".menu-lang").find(".menu").change(function(){window.location=t(this).find(":selected").val()}),t(".js-menu-btn").click(function(){t(this).toggleClass("open"),t(".js-menu-main").toggleClass("expanded")}),t(document).ready(function(){t(".comment-form").hasClass("form_with_errors")?t("html, body").scrollTop(t(".comment-form").offset().top):t("form").find(".form_error, .form_notice").length>0&&t("html, body").scrollTop(t(".form_error, .form_notice").closest("form").offset().top)}),t("html").hasClass("editmode")?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):t(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);