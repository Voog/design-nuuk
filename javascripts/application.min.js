var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var f,s,l,I,u,g;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),I=function(t,o,e){return(t<<2*b.sigbits)+(o<<b.sigbits)+e},f=function(){function t(t,o,e,r,i,n,s){this.r1=t,this.r2=o,this.g1=e,this.g2=r,this.b1=i,this.b2=n,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,r,i,n,s,a,c,h,l,u;if(!this._count_set||t){for(i=0,n=s=this.r1,h=this.r2;s<=h;n=s+=1)for(e=a=this.g1,l=this.g2;a<=l;e=a+=1)for(o=c=this.b1,u=this.b2;c<=u;o=c+=1)r=I(n,e,o),i+=this.histo[r]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,r,i,n,s,a,c,h,l,u,g,d,f,p,m;if(!this._average||t){for(a=1<<8-b.sigbits,e=i=h=l=0,c=u=this.r1,f=this.r2;u<=f;c=u+=1)for(r=g=this.g1,p=this.g2;g<=p;r=g+=1)for(o=d=this.b1,m=this.b2;d<=m;o=d+=1)s=I(c,r,o),l+=n=this.histo[s]||0,h+=n*(c+.5)*a,i+=n*(r+.5)*a,e+=n*(o+.5)*a;this._average=l?[~~(h/l),~~(i/l),~~(e/l)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,e,r;return r=t[0]>>b.rshift,e=t[1]>>b.rshift,o=t[2]>>b.rshift,this.r1<=r&&r<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=o&&o<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var e,r;return e=t.count()*t.volume(),(r=o.count()*o.volume())<e?1:e<r?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,e,r;for(o=e=0,r=this.cboxes.size();e<r;o=e+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,e,r,i,n,s,a;for(n=function(t){return t*t},r=1e9,e=s=0,a=this.cboxes.size();s<a;e=s+=1)(o=Math.sqrt(n(t[0]-this.cboxes.peek(e).color[0])+n(t[1]-this.cboxes.peek(e).color[1])+n(t[2]-this.cboxes.peek(e).color[2])))<r&&(r=o,i=this.cboxes.peek(e).color);return i},t}(),u=function(t){var o,e,r,i,n,s,a,c;for(r=new Array(1<<3*b.sigbits),a=0,c=t.length;a<c;a++)s=(n=t[a])[0]>>b.rshift,e=n[1]>>b.rshift,o=n[2]>>b.rshift,r[i=I(s,e,o)]=(r[i]||0)+1;return r},l=function(t,o){var e,r,i,n,s,a,c,h,l,u,g,d;for(i=a=u=1e6,g=r=s=l=0,d=t.length;g<d;g++)(h=(c=t[g])[0]>>b.rshift)<u?u=h:l<h&&(l=h),(n=c[1]>>b.rshift)<a?a=n:s<n&&(s=n),(e=c[2]>>b.rshift)<i?i=e:r<e&&(r=e);return new f(u,l,a,s,i,r,o)},g=function(t,g){var o,e,r,i,n,d,s,f,a,c,h,p,l,u,m,b,v,y,C,w,x,k,_,j,z,M,P,D,L,S;if(g.count()){if(1===g.count())return[g.copy()];if(c=g.r2-g.r1+1,n=g.g2-g.g1+1,e=g.b2-g.b1+1,s=Math.max(c,n,e),p=0,f=[],d=[],s===c)for(a=l=g.r1,k=g.r2;l<=k;a=l+=1){for(h=0,i=u=g.g1,P=g.g2;u<=P;i=u+=1)for(o=m=g.b1,D=g.b2;m<=D;o=m+=1)h+=t[I(a,i,o)]||0;p+=h,f[a]=p}else if(s===n)for(i=b=g.g1,L=g.g2;b<=L;i=b+=1){for(h=0,a=v=g.r1,S=g.r2;v<=S;a=v+=1)for(o=y=g.b1,_=g.b2;y<=_;o=y+=1)h+=t[I(a,i,o)]||0;p+=h,f[i]=p}else for(o=C=g.b1,j=g.b2;C<=j;o=C+=1){for(h=0,a=w=g.r1,z=g.r2;w<=z;a=w+=1)for(i=x=g.g1,M=g.g2;x<=M;i=x+=1)h+=t[I(a,i,o)]||0;p+=h,f[o]=p}return f.forEach(function(t,o){return d[o]=p-t}),r=function(t){var o,e,r,i,n,s,a,c,h,l,u;for(s=t+"2",a=l=g[n=t+"1"],u=g[s];l<=u;a=l+=1)if(f[a]>p/2){for(o=g.copy(),e=g.copy(),i=(c=a-g[n])<=(h=g[s]-a)?Math.min(g[s]-1,~~(a+h/2)):Math.max(g[n],~~(a-1-c/2));!f[i];)i++;for(r=d[i];!r&&f[i-1];)r=d[--i];return o[s]=i,e[n]=o[s]+1,[o,e]}},s===c?r("r"):s===n?r("g"):s===e?r("b"):void 0}},b.prototype.quantize=function(t,o){var a,e,c,r,i,n,h=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(c=u(t),a=l(t,c),(i=new PriorityQueue(function(t,o){var e,r;return e=t.count(),(r=o.count())<e?1:e<r?-1:0})).push(a),(r=function(t,o){var e,r,i,n,s;for(n=1,s=0;s<h.maxIterations;)if((a=t.pop()).count()){if(e=(i=g(c,a))[0],r=i[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),r&&(t.push(r),n++),o<=n)return;if(s++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(i,this.fractByPopulations*o),n=new PriorityQueue(function(t,o){var e,r;return e=t.count()*t.volume(),(r=o.count()*o.volume())<e?1:e<r?-1:0});i.size();)n.push(i.pop());for(r(n,o-n.size()),e=new s;n.size();)e.push(n.pop());return e},b}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,o,e,r,i,n){var s,a,c,h,l,u,g,d,f,p;for(null==n&&(n=8),c=t.getContext("2d").getImageData(o,e,r,i).data,h=[],u=g=e,f=e+i;g<f;u=g+=1)for(a=u*r*4,l=d=o,p=o+r;d<p;l=d+=1)s=a+4*l,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,n)},m.colorDist=function(t,o){var e;return(e=function(t){return t*t})(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},m.extract=function(t,o,e){var r,i,n,s,a,c,h,l,u,g,d,f,p;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(i=m.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),r=i[0].rgb,(h=m.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),g=l=0,f=h.length;g<f;g++)n=h[g],l<(s=m.colorDist(r,n.rgb))&&(l=s,a=n.rgb);for(d=l=0,p=h.length;d<p;d++)n=h[d],l<(s=m.colorDist(r,n.rgb))&&n.rgb!==a&&(l=s,c=n.rgb);return e({bgColor:(u=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(r),fgColor:u(a),fgColor2:u(c)})},m}()}.call(this),function(u){var g=function(t,o){.5<=o?u(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):u(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},r=function(t,o){return function(e,r){if(e&&r){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(e,function(t,o){e[t]=+o})),"string"==typeof r&&(r=r.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(r,function(t,o){r[t]=+o})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof r&&r.hasOwnProperty("length")&&3==r.length&&r.push(1);var t=[0,0,0,0];return t[3]=1-(1-r[3])*(1-e[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(r[0]*r[3]/t[3]+e[0]*e[3]*(1-r[3])/t[3],255),t[1]=Math.min(r[1]*r[3]/t[3]+e[1]*e[3]*(1-r[3])/t[3],255),t[2]=Math.min(r[2]*r[3]/t[3]+e[2]*e[3]*(1-r[3])/t[3],255),u.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])},d=function(t,o){var e=r(t,o);return Math.round((.2126*+e[0]+.7152*+e[1]+.0722*+e[2])/2.55)/100};new LazyLoad({threshold:500,elements_selector:".js-lazyload",callback_loaded:function(t){u(t).closest(".js-content-item-box").removeClass("not-loaded with-error").addClass("is-loaded")}});window.site=u.extend(window.site||{},{bgPickerPreview:function(o,t,e){var r=u(o).css("background-image"),i=t.imageSizes?function(t,o){for(var e,r=0,i=t.length;r<i;r++){if(t[r].width<o)return e||t[r];e=t[r]}return t[t.length-1]}(t.imageSizes,u(window).width()):null,n=t.image&&""!==t.image?"url("+i.url+")":"none",s=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,a=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",c=(t.colorData&&""!==t.colorData&&t.colorData.lightness,u("<img>")),h=u("<canvas>"),l=t.image&&""!==t.image?t.image:null;l?function(t,o){for(var e=t.length;e--;)if(-1<o.indexOf(t[e].url.trim()))return!0;return!1}(s,r)?(e.imageColor=e.imageColor?e.imageColor:defaultImageColor,e.combinedLightness=d(e.imageColor,a),g(o,e.combinedLightness)):(c.attr("src",l.replace(/.*\/(photos|voogstock)/g,"/photos")),c.on("load",function(){ColorExtract.extract(c[0],h[0],function(t){e.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",e.combinedLightness=d(e.imageColor,a),g(o,e.combinedLightness)})})):(e.imageColor="rgba(255,255,255,1)",e.combinedLightness=d(e.imageColor,a),g(o,e.combinedLightness)),u(o).find(".js-background-image").first().css({"background-image":n}),u(o).find(".js-background-color").first().css({"background-color":a})},bgPickerCommit:function(t,o,e,r){var i,n=u.extend(!0,{},o);n.image=o.image||"",n.imageSizes=null==(i=o.imageSizes)||"string"==typeof i&&i.match(/^[\\'"]+$/)?"":i,n.color=o.color||"",n.combinedLightness=e.combinedLightness,"articlePage"===r?Edicy.articles.currentArticle.setData(t,n):pageData.set(t,n)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?u(".header-wrapper").addClass("light").removeClass("dark"):u(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=u(".js-content-optional"),u.each(u(optionalContent),function(){optionalContentLength=u(this).text().trim().length,0<!optionalContentLength&&u(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindContentItemImgDropAreas:function(a){u(".js-content-item-img-drop-area").each(function(t,o){var e=u(o),r=e.closest(".js-content-item-box"),i=r.data("item-id"),n=r.data("item-type"),s=new Edicy.CustomData({type:n,id:i});new Edicy.ImgDropArea(e,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+a+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(t){var o=r.find(".js-toggle-crop-state");e.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),t?(t.original_id,s.set("item_image",t),r.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),o.removeClass("is-hidden").addClass("is-visible")):(r.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),o.addClass("is-hidden").removeClass("is-visible"),r.find(".edy-img-drop-area-placeholder").css("opacity",0)),s.set("image_crop_state","not-cropped"),r.removeClass("not-loaded with-error").addClass("is-loaded"),r.find(".edy-img-drop-area-placeholder").css("opacity",1),e.css("opacity",1)}})})},bindContentItemImageCropToggle:function(){u(".js-toggle-crop-state").on("click",function(){var t,o=u(this).closest(".js-content-item-box"),e=o.find(".js-content-item-img-drop-area"),r=o.data("item-id"),i=o.data("item-type"),n=new Edicy.CustomData({type:i,id:r});e.hasClass("is-cropped")?(e.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(e.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),n.set("image_crop_state",t)})},bindSiteSearch:function(t,o,e){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:u(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:e})}}),u(".container, .bg_img-cover").on("mousedown",function(t){u(t.target).closest(".js-prevent-sideclick").length||(u(".js-semimodal").removeClass("semimodal-visible"),u(".js-popover").removeClass("expanded"),u(".js-search-close-btn").trigger("click"))}),u(".menu-lang").find(".menu").change(function(){window.location=u(this).find(":selected").val()}),u(".js-menu-btn, .js-close-menu").click(function(){u(".js-semimodal").toggleClass("semimodal-visible")}),u(document).ready(function(){u(".comment-form").hasClass("form_with_errors")?u("html, body").scrollTop(u(".comment-form").offset().top):0<u("form").find(".form_error, .form_notice").length&&u("html, body").scrollTop(u(".form_error, .form_notice").closest("form").offset().top)}),u("html").hasClass("editmode")?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):u(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);