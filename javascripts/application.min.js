var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var p,s,l,I,u,g;function v(){this.maxIterations=1e3,this.fractByPopulations=.75}return v.rshift=8-(v.sigbits=5),I=function(t,e,o){return(t<<2*v.sigbits)+(e<<v.sigbits)+o},p=function(){function t(t,e,o,r,i,n,s){this.r1=t,this.r2=e,this.g1=o,this.g2=r,this.b1=i,this.b2=n,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,o,r,i,n,s,a,c,h,l,u;if(!this._count_set||t){for(i=0,n=s=this.r1,h=this.r2;s<=h;n=s+=1)for(o=a=this.g1,l=this.g2;a<=l;o=a+=1)for(e=c=this.b1,u=this.b2;c<=u;e=c+=1)r=I(n,o,e),i+=this.histo[r]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,o,r,i,n,s,a,c,h,l,u,g,d,p,f,m;if(!this._average||t){for(a=1<<8-v.sigbits,o=i=h=l=0,c=u=this.r1,p=this.r2;u<=p;c=u+=1)for(r=g=this.g1,f=this.g2;g<=f;r=g+=1)for(e=d=this.b1,m=this.b2;d<=m;e=d+=1)s=I(c,r,e),l+=n=this.histo[s]||0,h+=n*(c+.5)*a,i+=n*(r+.5)*a,o+=n*(e+.5)*a;this._average=l?[~~(h/l),~~(i/l),~~(o/l)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,o,r;return r=t[0]>>v.rshift,o=t[1]>>v.rshift,e=t[2]>>v.rshift,this.r1<=r&&r<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=e&&e<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,r;return o=t.count()*t.volume(),(r=e.count()*e.volume())<o?1:o<r?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,r;for(e=o=0,r=this.cboxes.size();o<r;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,r,i,n,s,a;for(n=function(t){return t*t},r=1e9,o=s=0,a=this.cboxes.size();s<a;o=s+=1)(e=Math.sqrt(n(t[0]-this.cboxes.peek(o).color[0])+n(t[1]-this.cboxes.peek(o).color[1])+n(t[2]-this.cboxes.peek(o).color[2])))<r&&(r=e,i=this.cboxes.peek(o).color);return i},t}(),u=function(t){var e,o,r,i,n,s,a,c;for(r=new Array(1<<3*v.sigbits),a=0,c=t.length;a<c;a++)s=(n=t[a])[0]>>v.rshift,o=n[1]>>v.rshift,e=n[2]>>v.rshift,r[i=I(s,o,e)]=(r[i]||0)+1;return r},l=function(t,e){var o,r,i,n,s,a,c,h,l,u,g,d;for(i=a=u=1e6,g=r=s=l=0,d=t.length;g<d;g++)(h=(c=t[g])[0]>>v.rshift)<u?u=h:l<h&&(l=h),(n=c[1]>>v.rshift)<a?a=n:s<n&&(s=n),(o=c[2]>>v.rshift)<i?i=o:r<o&&(r=o);return new p(u,l,a,s,i,r,e)},g=function(t,g){var e,o,r,i,n,d,s,p,a,c,h,f,l,u,m,v,b,C,w,y,x,j,k,_,z,M,P,D,L,S;if(g.count()){if(1===g.count())return[g.copy()];if(c=g.r2-g.r1+1,n=g.g2-g.g1+1,o=g.b2-g.b1+1,s=Math.max(c,n,o),f=0,p=[],d=[],s===c)for(a=l=g.r1,j=g.r2;l<=j;a=l+=1){for(h=0,i=u=g.g1,P=g.g2;u<=P;i=u+=1)for(e=m=g.b1,D=g.b2;m<=D;e=m+=1)h+=t[I(a,i,e)]||0;f+=h,p[a]=f}else if(s===n)for(i=v=g.g1,L=g.g2;v<=L;i=v+=1){for(h=0,a=b=g.r1,S=g.r2;b<=S;a=b+=1)for(e=C=g.b1,k=g.b2;C<=k;e=C+=1)h+=t[I(a,i,e)]||0;f+=h,p[i]=f}else for(e=w=g.b1,_=g.b2;w<=_;e=w+=1){for(h=0,a=y=g.r1,z=g.r2;y<=z;a=y+=1)for(i=x=g.g1,M=g.g2;x<=M;i=x+=1)h+=t[I(a,i,e)]||0;f+=h,p[e]=f}return p.forEach(function(t,e){return d[e]=f-t}),r=function(t){var e,o,r,i,n,s,a,c,h,l,u;for(s=t+"2",a=l=g[n=t+"1"],u=g[s];l<=u;a=l+=1)if(p[a]>f/2){for(e=g.copy(),o=g.copy(),i=(c=a-g[n])<=(h=g[s]-a)?Math.min(g[s]-1,~~(a+h/2)):Math.max(g[n],~~(a-1-c/2));!p[i];)i++;for(r=d[i];!r&&p[i-1];)r=d[--i];return e[s]=i,o[n]=e[s]+1,[e,o]}},s===c?r("r"):s===n?r("g"):s===o?r("b"):void 0}},v.prototype.quantize=function(t,e){var a,o,c,r,i,n,h=this;if(!t.length||e<2||256<e)return console.log("invalid arguments"),!1;for(c=u(t),a=l(t,c),(i=new PriorityQueue(function(t,e){var o,r;return o=t.count(),(r=e.count())<o?1:o<r?-1:0})).push(a),(r=function(t,e){var o,r,i,n,s;for(n=1,s=0;s<h.maxIterations;)if((a=t.pop()).count()){if(o=(i=g(c,a))[0],r=i[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),r&&(t.push(r),n++),e<=n)return;if(s++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(i,this.fractByPopulations*e),n=new PriorityQueue(function(t,e){var o,r;return o=t.count()*t.volume(),(r=e.count()*e.volume())<o?1:o<r?-1:0});i.size();)n.push(i.pop());for(r(n,e-n.size()),o=new s;n.size();)o.push(n.pop());return o},v}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,e,o,r,i,n){var s,a,c,h,l,u,g,d,p,f;for(null==n&&(n=8),c=t.getContext("2d").getImageData(e,o,r,i).data,h=[],u=g=o,p=o+i;g<p;u=g+=1)for(a=u*r*4,l=d=e,f=e+r;d<f;l=d+=1)s=a+4*l,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,n)},m.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},m.extract=function(t,e,o){var r,i,n,s,a,c,h,l,u,g,d,p,f;for(e.width=25,e.height=25,e.getContext("2d").drawImage(t,0,0,e.width,e.height),(i=m.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),r=i[0].rgb,(h=m.getColorMap(e,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),g=l=0,p=h.length;g<p;g++)n=h[g],l<(s=m.colorDist(r,n.rgb))&&(l=s,a=n.rgb);for(d=l=0,f=h.length;d<f;d++)n=h[d],l<(s=m.colorDist(r,n.rgb))&&n.rgb!==a&&(l=s,c=n.rgb);return o({bgColor:(u=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(r),fgColor:u(a),fgColor2:u(c)})},m}()}.call(this),function(u){var g=function(t,e){.5<=e?u(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):u(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},r=function(t,e){return function(o,r){if(o&&r){"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(o,function(t,e){o[t]=+e})),"string"==typeof r&&(r=r.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(r,function(t,e){r[t]=+e})),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1),"object"==typeof r&&r.hasOwnProperty("length")&&3==r.length&&r.push(1);var t=[0,0,0,0];return t[3]=1-(1-r[3])*(1-o[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(r[0]*r[3]/t[3]+o[0]*o[3]*(1-r[3])/t[3],255),t[1]=Math.min(r[1]*r[3]/t[3]+o[1]*o[3]*(1-r[3])/t[3],255),t[2]=Math.min(r[2]*r[3]/t[3]+o[2]*o[3]*(1-r[3])/t[3],255),u.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],e||[255,255,255,1])},d=function(t,e){var o=r(t,e);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},e=function(){u(window).width()<=640?u(".js-voog-search-modal").css("max-height",u(window).height()-56):u(".js-voog-search-modal").css("max-height","auto")};new LazyLoad({threshold:500,elements_selector:".js-lazyload",callback_loaded:function(t){u(t).closest(".js-content-item-box").removeClass("not-loaded with-error").addClass("is-loaded")}});window.site=u.extend(window.site||{},{bgPickerPreview:function(e,t,o){var r=u(e).css("background-image"),i=t.imageSizes?function(t,e){for(var o,r=0,i=t.length;r<i;r++){if(t[r].width<e)return o||t[r];o=t[r]}return t[t.length-1]}(t.imageSizes,u(window).width()):null,n=t.image&&""!==t.image?"url("+i.url+")":"none",s=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,a=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",c=(t.colorData&&""!==t.colorData&&t.colorData.lightness,u("<img>")),h=u("<canvas>"),l=t.image&&""!==t.image?t.image:null;l?function(t,e){for(var o=t.length;o--;)if(-1<e.indexOf(t[o].url.trim()))return!0;return!1}(s,r)?(o.imageColor=o.imageColor?o.imageColor:defaultImageColor,o.combinedLightness=d(o.imageColor,a),g(e,o.combinedLightness)):(c.attr("src",l.replace(/.*\/(photos|voogstock)/g,"/photos")),c.on("load",function(){ColorExtract.extract(c[0],h[0],function(t){o.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",o.combinedLightness=d(o.imageColor,a),g(e,o.combinedLightness)})})):(o.imageColor="rgba(255,255,255,1)",o.combinedLightness=d(o.imageColor,a),g(e,o.combinedLightness)),u(e).find(".js-background-image").first().css({"background-image":n}),u(e).find(".js-background-color").first().css({"background-color":a})},bgPickerCommit:function(t,e,o,r){var i,n=u.extend(!0,{},e);n.image=e.image||"",n.imageSizes=null==(i=e.imageSizes)||"string"==typeof i&&i.match(/^[\\'"]+$/)?"":i,n.color=e.color||"",n.combinedLightness=o.combinedLightness,"articlePage"===r?Edicy.articles.currentArticle.setData(t,n):pageData.set(t,n)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?u(".header-wrapper").addClass("light").removeClass("dark"):u(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=u(".js-content-optional"),u.each(u(optionalContent),function(){optionalContentLength=u(this).text().trim().length,0<!optionalContentLength&&u(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindContentItemImgDropAreas:function(a){u(".js-content-item-img-drop-area").each(function(t,e){var o=u(e),r=o.closest(".js-content-item-box"),i=r.data("item-id"),n=r.data("item-type"),s=new Edicy.CustomData({type:n,id:i});new Edicy.ImgDropArea(o,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+a+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(t){var e=r.find(".js-toggle-crop-state");o.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),t?(t.original_id,s.set("item_image",t),r.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),e.removeClass("is-hidden").addClass("is-visible")):(r.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),e.addClass("is-hidden").removeClass("is-visible"),r.find(".edy-img-drop-area-placeholder").css("opacity",0)),s.set("image_crop_state","not-cropped"),r.removeClass("not-loaded with-error").addClass("is-loaded"),r.find(".edy-img-drop-area-placeholder").css("opacity",1),o.css("opacity",1)}})})},bindContentItemImageCropToggle:function(){u(".js-toggle-crop-state").on("click",function(){var t,e=u(this).closest(".js-content-item-box"),o=e.find(".js-content-item-img-drop-area"),r=e.data("item-id"),i=e.data("item-type"),n=new Edicy.CustomData({type:i,id:r});o.hasClass("is-cropped")?(o.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(o.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),n.set("image_crop_state",t)})},bindSiteSearch:function(t,e,o){t&&new VoogSearch(t,{per_page:10,lang:e,resultsContainer:u(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:o})}}),u(".container, .bg_img-cover, .content_wrap").on("mousedown",function(t){u(t.target).closest(".js-prevent-sideclick").length||(u(".js-semimodal-toggle").removeClass("semimodal-open"),u(".js-popover").removeClass("expanded"),u("html").removeClass("search-open"),u(".js-search").removeClass("active"),u(".search-btn").removeClass("open"))}),u(".menu-lang").find(".menu").change(function(){window.location=u(this).find(":selected").val()}),u(".js-search").hasClass("active")&&(u(".js-search").removeClass("active"),u(".search-btn").removeClass("open")),u(".js-search-toggle-btn").click(function(){u("html").removeClass("mobilemenu-open"),u("html").removeClass("menu-language-popover-open"),u(".js-search").toggleClass("active"),u(".js-search").hasClass("active")&&u(".js-search-input").focus(),u("html").toggleClass("search-open")}),u(".js-search-input").on("input",function(){var t=u(this).parent().next();1<u(this).val().length?t.addClass("active"):t.removeClass("active"),e()}),u(".js-search-reset-btn").click(function(){u("html").removeClass("search-open"),u(".js-search").removeClass("active")}),u(".js-menu-btn, .js-close-menu").click(function(){u(".js-semimodal-toggle").toggleClass("semimodal-open")}),u(document).ready(function(){u(".comment-form").hasClass("form_with_errors")?u("html, body").scrollTop(u(".comment-form").offset().top):0<u("form").find(".form_error, .form_notice").length&&u("html, body").scrollTop(u(".form_error, .form_notice").closest("form").offset().top)}),window.addEventListener("scroll",function(t){var e=u(".header_fixed").height();window.scrollY>e?u(".header_fixed").addClass("scroll"):u(".header_fixed").removeClass("scroll")}),u("html").hasClass("editmode")?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):u(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);