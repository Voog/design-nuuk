var MMCQ,PriorityQueue;PriorityQueue=function(){function e(e){this.comparator=e,this.contents=[],this.sorted=!1}return e.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},e.prototype.push=function(e){return this.contents.push(e),this.sorted=!1},e.prototype.peek=function(e){return null==e&&(e=this.contents.length-1),this.sorted||this.sort(),this.contents[e]},e.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},e.prototype.size=function(){return this.contents.length},e.prototype.map=function(e){return this.contents.map(e)},e}(),MMCQ=function(){var e,t,o,n,s,i;function r(){this.maxIterations=1e3,this.fractByPopulations=.75}return r.sigbits=5,r.rshift=8-r.sigbits,n=function(e,t,o){return(e<<2*r.sigbits)+(t<<r.sigbits)+o},e=function(){function e(e,t,o,n,s,i,r){this.r1=e,this.r2=t,this.g1=o,this.g2=n,this.b1=s,this.b2=i,this.histo=r}return e.prototype.volume=function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},e.prototype.count=function(e){var t,o,s,i,r,a,l,c,u,g,h;if(!this._count_set||e){for(i=0,r=a=this.r1,u=this.r2;a<=u;r=a+=1)for(o=l=this.g1,g=this.g2;l<=g;o=l+=1)for(t=c=this.b1,h=this.b2;c<=h;t=c+=1)s=n(r,o,t),i+=this.histo[s]||0;this._count_set=!0,this._count=i}return this._count},e.prototype.copy=function(){return new e(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},e.prototype.average=function(e){var t,o,s,i,a,l,c,u,g,h,d,m,p,f,v,b;if(!this._average||e){for(c=1<<8-r.sigbits,h=0,g=0,i=0,o=0,u=d=this.r1,f=this.r2;d<=f;u=d+=1)for(s=m=this.g1,v=this.g2;m<=v;s=m+=1)for(t=p=this.b1,b=this.b2;p<=b;t=p+=1)l=n(u,s,t),h+=a=this.histo[l]||0,g+=a*(u+.5)*c,i+=a*(s+.5)*c,o+=a*(t+.5)*c;this._average=h?[~~(g/h),~~(i/h),~~(o/h)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},e.prototype.contains=function(e){var t,o,n;return n=e[0]>>r.rshift,o=e[1]>>r.rshift,t=e[2]>>r.rshift,this.r1<=n&&n<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=t&&t<=this.b2},e}(),t=function(){function e(){this.cboxes=new PriorityQueue(function(e,t){var o,n;return(o=e.count()*e.volume())>(n=t.count()*t.volume())?1:o<n?-1:0})}return e.prototype.push=function(e){return this.cboxes.push({cbox:e,color:e.average()})},e.prototype.palette=function(){return this.cboxes.map(function(e){return e.color})},e.prototype.size=function(){return this.cboxes.size()},e.prototype.map=function(e){var t,o,n;for(t=o=0,n=this.cboxes.size();o<n;t=o+=1)return this.cboxes.peek(t).cbox.contains(e)?this.cboxes.peek(t).color:this.nearest(e)},e.prototype.cboxes=function(){return this.cboxes},e.prototype.nearest=function(e){var t,o,n,s,i,r,a;for(i=function(e){return e*e},n=1e9,o=r=0,a=this.cboxes.size();r<a;o=r+=1)(t=Math.sqrt(i(e[0]-this.cboxes.peek(o).color[0])+i(e[1]-this.cboxes.peek(o).color[1])+i(e[2]-this.cboxes.peek(o).color[2])))<n&&(n=t,s=this.cboxes.peek(o).color);return s},e}(),s=function(e){var t,o,s,i,a,l,c,u,g;for(i=1<<3*r.sigbits,s=new Array(i),u=0,g=e.length;u<g;u++)c=(l=e[u])[0]>>r.rshift,o=l[1]>>r.rshift,t=l[2]>>r.rshift,s[a=n(c,o,t)]=(s[a]||0)+1;return s},o=function(t,o){var n,s,i,a,l,c,u,g,h,d,m,p;for(d=1e6,h=0,c=1e6,l=0,i=1e6,s=0,m=0,p=t.length;m<p;m++)g=(u=t[m])[0]>>r.rshift,a=u[1]>>r.rshift,n=u[2]>>r.rshift,g<d?d=g:g>h&&(h=g),a<c?c=a:a>l&&(l=a),n<i?i=n:n>s&&(s=n);return new e(d,h,c,l,i,s,o)},i=function(e,t){var o,s,i,r,a,l,c,u,g,h,d,m,p,f,v,b,C,y,w,_,x,j,k,z,M,I,P,D,L,S;if(t.count()){if(1===t.count())return[t.copy()];if(h=t.r2-t.r1+1,a=t.g2-t.g1+1,s=t.b2-t.b1+1,c=Math.max(h,a,s),m=0,u=[],l=[],c===h)for(g=p=t.r1,j=t.r2;p<=j;g=p+=1){for(d=0,r=f=t.g1,P=t.g2;f<=P;r=f+=1)for(o=v=t.b1,D=t.b2;v<=D;o=v+=1)d+=e[n(g,r,o)]||0;m+=d,u[g]=m}else if(c===a)for(r=b=t.g1,L=t.g2;b<=L;r=b+=1){for(d=0,g=C=t.r1,S=t.r2;C<=S;g=C+=1)for(o=y=t.b1,k=t.b2;y<=k;o=y+=1)d+=e[n(g,r,o)]||0;m+=d,u[r]=m}else for(o=w=t.b1,z=t.b2;w<=z;o=w+=1){for(d=0,g=_=t.r1,M=t.r2;_<=M;g=_+=1)for(r=x=t.g1,I=t.g2;x<=I;r=x+=1)d+=e[n(g,r,o)]||0;m+=d,u[o]=m}return u.forEach(function(e,t){return l[t]=m-e}),i=function(e){var o,n,s,i,r,a,c,g,h,d,p;for(a=e+"2",c=d=t[r=e+"1"],p=t[a];d<=p;c=d+=1)if(u[c]>m/2){for(o=t.copy(),n=t.copy(),i=(g=c-t[r])<=(h=t[a]-c)?Math.min(t[a]-1,~~(c+h/2)):Math.max(t[r],~~(c-1-g/2));!u[i];)i++;for(s=l[i];!s&&u[i-1];)s=l[--i];return o[a]=i,n[r]=o[a]+1,[o,n]}},c===h?i("r"):c===a?i("g"):c===s?i("b"):void 0}},r.prototype.quantize=function(e,n){var r,a,l,c,u,g,h=this;if(!e.length||n<2||n>256)return console.log("invalid arguments"),!1;for(l=s(e),r=o(e,l),(u=new PriorityQueue(function(e,t){var o,n;return(o=e.count())>(n=t.count())?1:o<n?-1:0})).push(r),(c=function(e,t){var o,n,s,a,c;for(a=1,c=0;c<h.maxIterations;)if((r=e.pop()).count()){if(o=(s=i(l,r))[0],n=s[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(e.push(o),n&&(e.push(n),a++),a>=t)return;if(c++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else e.push(r),c++})(u,this.fractByPopulations*n),g=new PriorityQueue(function(e,t){var o,n;return(o=e.count()*e.volume())>(n=t.count()*t.volume())?1:o<n?-1:0});u.size();)g.push(u.pop());for(c(g,n-g.size()),a=new t;g.size();)a.push(g.pop());return a},r}.call(this),function(){window.ColorExtract=function(){function e(){}return e.getColorMap=function(e,t,o,n,s,i){var r,a,l,c,u,g,h,d,m,p;for(null==i&&(i=8),l=e.getContext("2d").getImageData(t,o,n,s).data,c=[],g=h=o,m=o+s;h<m;g=h+=1)for(a=g*n*4,u=d=t,p=t+n;d<p;u=d+=1)r=a+4*u,c.push([l[r],l[r+1],l[r+2]]);return(new MMCQ).quantize(c,i)},e.colorDist=function(e,t){var o;return(o=function(e){return e*e})(e[0]-t[0])+o(e[1]-t[1])+o(e[2]-t[2])},e.extract=function(t,o,n){var s,i,r,a,l,c,u,g,h,d,m,p,f;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(i=e.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),s=i[0].rgb,(u=e.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(e){return{count:e.cbox.count(),rgb:e.color}})).sort(function(e,t){return t.count-e.count}),g=0,d=0,p=u.length;d<p;d++)r=u[d],(a=e.colorDist(s,r.rgb))>g&&(g=a,l=r.rgb);for(g=0,m=0,f=u.length;m<f;m++)r=u[m],(a=e.colorDist(s,r.rgb))>g&&r.rgb!==l&&(g=a,c=r.rgb);return n({bgColor:(h=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"})(s),fgColor:h(l),fgColor2:h(c)})},e}()}.call(this),function(e){var t,o=function(){return e("html").hasClass("editmode")},n=function(t,o){o>=.5?e(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):e(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},s=function(t,o){return function(t,o){if(t&&o){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,function(e,o){t[e]=+o})),"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(o,function(e,t){o[e]=+t})),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1);var n=[0,0,0,0];return n[3]=1-(1-o[3])*(1-t[3]),0===n[3]&&(n[3]=1e-6),n[0]=Math.min(o[0]*o[3]/n[3]+t[0]*t[3]*(1-o[3])/n[3],255),n[1]=Math.min(o[1]*o[3]/n[3]+t[1]*t[3]*(1-o[3])/n[3],255),n[2]=Math.min(o[2]*o[3]/n[3]+t[2]*t[3]*(1-o[3])/n[3],255),e.map(n,function(e){return Math.floor(e)})}}(t||[255,255,255,1],o||[255,255,255,1])},i=function(e,t){var o=s(e,t);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},r=function(){e(".js-search").hasClass("active")&&(e(".js-search").removeClass("active"),e(".search-btn").removeClass("open"));e(".js-search-toggle-btn").focus(function(){e("html").removeClass("mobilemenu-open"),e(".js-search").toggleClass("active"),e(".js-search").hasClass("active")&&e(".js-search-input").focus(),e("html").toggleClass("search-open")}),e(".js-search-input").on("input",function(){var t=e(this).parent().next();e(this).val().length>1?t.addClass("active"):t.removeClass("active")}),e(".js-search-reset-btn").click(function(){e("html").removeClass("search-open"),e(".js-search").removeClass("active")})},a=function(t,o){var n=e(t);e(o).css({top:"40px",right:Math.round(e(window).width()-n.offset().left-n.outerWidth())})},l=(new LazyLoad({threshold:500,elements_selector:".js-lazyload",callback_loaded:function(t){e(t).closest(".js-content-item-box").removeClass("not-loaded with-error").addClass("is-loaded")}}),function(){var t,o,n,s;e(window).resize((t=function(){c(),e("html").hasClass("menu-language-popover-open")&&a(".js-toggle-menu-language",".js-menu-language-popover")},o=25,function(){var e=this,i=arguments,r=n&&!s;clearTimeout(s),s=setTimeout(function(){s=null,n||t.apply(e,i)},o),r&&t.apply(e,i)}))}),c=function(){e(".header_bottom").css("top",e(".header_fixed").innerHeight()+60),e(".semimodal_settings-btn").css("top",e(".header_fixed").innerHeight()),e(".semimodal_picker-btn").css("top",e(".header_fixed").innerHeight()+30)};window.site=e.extend(window.site||{},{bgPickerPreview:function(t,o,s){var r=e(t).css("background-image"),a=o.imageSizes?function(e,t){for(var o,n=0,s=e.length;n<s;n++){if(e[n].width<t)return o||e[n];o=e[n]}return e[e.length-1]}(o.imageSizes,e(window).width()):null,l=o.image&&""!==o.image?"url("+a.url+")":"none",c=o.imageSizes&&""!==o.imageSizes?o.imageSizes:null,u=o.color&&""!==o.color?o.color:"rgba(0,0,0,0)",g=(o.colorData&&""!==o.colorData&&o.colorData.lightness,e("<img>")),h=e("<canvas>"),d=o.image&&""!==o.image?o.image:null;d?function(e,t){for(var o=e.length;o--;)if(t.indexOf(e[o].url.trim())>-1)return!0;return!1}(c,r)?(s.imageColor=s.imageColor?s.imageColor:defaultImageColor,s.combinedLightness=i(s.imageColor,u),n(t,s.combinedLightness)):(g.attr("src",d.replace(/.*\/(photos|voogstock)/g,"/photos")),g.on("load",function(){ColorExtract.extract(g[0],h[0],function(e){s.imageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",s.combinedLightness=i(s.imageColor,u),n(t,s.combinedLightness)})})):(s.imageColor="rgba(255,255,255,1)",s.combinedLightness=i(s.imageColor,u),n(t,s.combinedLightness)),e(t).find(".js-background-image").first().css({"background-image":l}),e(t).find(".js-background-color").first().css({"background-color":u})},bgPickerCommit:function(t,o,n,s){var i,r=e.extend(!0,{},o);r.image=o.image||"",r.imageSizes=null==(i=o.imageSizes)||"string"==typeof i&&i.match(/^[\\'"]+$/)?"":i,r.color=o.color||"",r.combinedLightness=n.combinedLightness,"articlePage"===s?Edicy.articles.currentArticle.setData(t,r):pageData.set(t,r)},bgPickerColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=e(".js-content-optional"),e.each(e(optionalContent),function(){optionalContentLength=e(this).text().trim().length,!optionalContentLength>0&&e(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindContentItemImgDropAreas:function(t){e(".js-content-item-img-drop-area").each(function(o,n){var s=e(n),i=s.closest(".js-content-item-box"),r=i.data("item-id"),a=i.data("item-type"),l=new Edicy.CustomData({type:a,id:r});new Edicy.ImgDropArea(s,{positionable:!1,target_width:1280,placeholder:'<div class="edy-img-drop-area-placeholder">'+t+"</div>",removeBtn:'<div class="edy-img-drop-area-remove-image"><div class="edy-img-drop-area-remove-image-ico"><svg width="16" height="20" viewBox="0 0 26 30" xmlns="http://www.w3.org/2000/svg"><g fill-rule="nonzero" fill="currentColor"><g transform="translate(2 5)"><path d="M0 .997h2V21c0 1 1 2 2 2h14c1 0 2-1 2-2V1h2v20c0 2.25-1.75 4-4 4H4c-2.25 0-4-1.75-4-4V.997z"/><rect x="10" y="4" width="2" height="16" rx="1"/><rect x="5" y="4" width="2" height="16" rx="1"/><rect x="15" y="4" width="2" height="16" rx="1"/></g><path d="M26 4v2H0V4h7V2c0-1 1-2 2-2h8c1 0 2 1 2 2v2h7zM9 4h8V3c0-.5-.5-1-1-1h-6c-.5 0-1 .5-1 1v1z"/></g></svg></div></div>',change:function(e){var t=i.find(".js-toggle-crop-state");s.removeClass("is-cropped").addClass("not-cropped").css("opacity",.1),e?(e.original_id,l.set("item_image",e),i.removeClass("without-image is-loaded with-error").addClass("with-image not-loaded"),t.removeClass("is-hidden").addClass("is-visible")):(i.removeClass("with-image is-loaded with-error").addClass("without-image not-loaded"),t.addClass("is-hidden").removeClass("is-visible"),i.find(".edy-img-drop-area-placeholder").css("opacity",0)),l.set("image_crop_state","not-cropped"),i.removeClass("not-loaded with-error").addClass("is-loaded"),i.find(".edy-img-drop-area-placeholder").css("opacity",1),s.css("opacity",1)}})})},bindContentItemImageCropToggle:function(){e(".js-toggle-crop-state").on("click",function(){var t,o=e(this).closest(".js-content-item-box"),n=o.find(".js-content-item-img-drop-area"),s=o.data("item-id"),i=o.data("item-type"),r=new Edicy.CustomData({type:i,id:s});n.hasClass("is-cropped")?(n.removeClass("is-cropped").addClass("not-cropped"),t="not-cropped"):(n.removeClass("not-cropped").addClass("is-cropped"),t="is-cropped"),r.set("image_crop_state",t)})},bindSiteSearch:function(t,o,n){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:e(".js-voog-search-modal").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:n})},bindLanguageMenuSettings:function(t){"type"in t||(t.type="popover"),"item_state"in t||(t.item_state="flags_and_names"),e(".js-menu-language-settings-toggle").each(function(o,n){new Edicy.SettingsEditor(n,{menuItems:[{titleI18n:"format",type:"radio",key:"type",list:[{titleI18n:"dropdown_menu",value:"popover"},{titleI18n:"expanded_menu",value:"list"}]},{titleI18n:"show",type:"radio",key:"item_state",list:[{titleI18n:"flags_only",value:"flags_only"},{titleI18n:"names_only",value:"names_only"},{titleI18n:"flags_and_names",value:"flags_and_names"}]}],buttonTitleI18n:"settings",values:t,containerClass:["js-menu-language-settings-popover","js-prevent-sideclick"],preview:function(t){var o=e("html"),n=e(".js-menu-language-settings");"list"===t.type?(o.removeClass("language-menu-mode-popover"),o.removeClass("menu-language-popover-open"),o.addClass("language-menu-mode-list"),n.appendTo(".js-menu-language-list-setting-parent")):(o.removeClass("language-menu-mode-list"),o.addClass("language-menu-mode-popover"),o.addClass("menu-language-popover-open"),n.appendTo(".js-menu-language-popover-setting-parent")),"flags_only"===t.item_state?(o.removeClass("language-flags-disabled"),o.removeClass("language-names-enabled"),o.addClass("language-flags-enabled"),o.addClass("language-names-disabled")):"names_only"===t.item_state?(o.removeClass("language-flags-enabled"),o.removeClass("language-names-disabled"),o.addClass("language-flags-disabled"),o.addClass("language-names-enabled")):"flags_and_names"===t.item_state&&(o.removeClass("language-flags-disabled"),o.removeClass("language-names-disabled"),o.addClass("language-flags-enabled"),o.addClass("language-names-enabled")),a(".js-toggle-menu-language",".js-menu-language-popover"),this.setPosition()},commit:function(e){siteData.set("settings_language_menu",e)}})})}}),e(".container, .bg_img-cover, .content_wrap, .header_fixed, swiper-container").on("mousedown",function(t){e(t.target).closest(".js-prevent-sideclick").length||(e(".js-semimodal-toggle").removeClass("semimodal-open"),e(".js-popover").removeClass("expanded"),e("html").removeClass("search-open"),e(".js-search").removeClass("active"),e(".search-btn").removeClass("open"),e("html").removeClass("menu-language-popover-open"))}),e(".menu-lang").find(".menu").change(function(){window.location=e(this).find(":selected").val()}),r(),e(".js-menu-btn, .js-close-menu").click(function(){e(".js-semimodal-toggle").toggleClass("semimodal-open")}),e(document).ready(function(){e(".comment-form").hasClass("form_with_errors")?e("html, body").scrollTop(e(".comment-form").offset().top):e("form").find(".form_error, .form_notice").length>0&&e("html, body").scrollTop(e(".form_error, .form_notice").closest("form").offset().top)}),l(),window.addEventListener("scroll",function(t){var o=e(".header_fixed").height();window.scrollY>o?e(".header_fixed").addClass("scroll"):e(".header_fixed").removeClass("scroll")}),c(),t=function(){var t=e("html");t.toggleClass("menu-language-popover-open"),t.hasClass("menu-main-opened")||t.hasClass("site-search-opened")?(t.removeClass("menu-main-opened site-search-opened"),setTimeout(function(){a(".js-toggle-menu-language",".js-menu-language-popover")},300)):t.hasClass("menu-language-popover-open")&&a(".js-toggle-menu-language",".js-menu-language-popover")},o()?e(".js-toggle-menu-language .menu-language-btn").click(function(){t()}):e(".js-toggle-menu-language").hover(function(){t()}),e(".js-toggle-menu-language").focus(function(){t()}),o()?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):e(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);